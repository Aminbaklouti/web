<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <title>Padel Scoreboard - SMU Radio Libertad</title>
    <style>
      :root {
        --smu-red: #d03539;
        --smu-blue: #0f5679;
        --light-bg: #f7f7f7;
        --text-light: #ffffff;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        padding: 10px;
        background-color: var(--light-bg);
      }

      .container {
        max-width: 900px;
        margin: 0 auto;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }

      .scoreboard {
        background-color: var(--smu-blue);
        color: var(--text-light);
        border-radius: 12px;
        padding: 15px;
        margin-bottom: 15px;
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
        flex-grow: 1;
      }

      .teams {
        display: flex;
        gap: 10px;
        height: 100%;
      }

      .team {
        flex: 1;
        text-align: center;
        padding: 10px;
        border-radius: 8px;
        display: flex;
        flex-direction: column;
      }

      .team-1 {
        background-color: var(--smu-red);
      }
      .team-2 {
        background-color: var(--smu-blue);
      }

      .team-name {
        font-size: 20px;
        margin-bottom: 10px;
        font-weight: bold;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .scores {
        display: flex;
        gap: 10px;
        margin-top: auto;
        flex-grow: 1;
      }

      .score-section {
        flex: 1;
        background-color: rgba(255, 255, 255, 0.1);
        border-radius: 8px;
        padding: 8px;
        display: flex;
        flex-direction: column;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .score-section:active {
        transform: scale(0.98);
      }

      .score-label {
        font-size: 14px;
        margin-bottom: 5px;
      }

      .score-value {
        font-size: 36px;
        padding: 10px;
        border-radius: 6px;
        margin: 0;
        font-weight: 700;
        transition: all 0.2s ease;
        flex-grow: 1;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .controls {
        background-color: white;
        border-radius: 12px;
        padding: 15px;
        margin-top: 15px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      .control-row {
        display: flex;
        gap: 10px;
        margin-bottom: 10px;
      }

      button {
        border: none;
        padding: 12px 20px;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s ease;
        font-size: 16px;
        flex: 1;
      }

      button:active {
        transform: scale(0.98);
      }

      .plus {
        background-color: var(--smu-blue);
        color: white;
      }
      .minus {
        background-color: var(--smu-red);
        color: white;
      }
      .reset {
        background-color: #666;
        color: white;
      }

      input[type="text"] {
        padding: 10px;
        width: 100%;
        border: 1px solid #ddd;
        border-radius: 6px;
        margin-bottom: 8px;
        font-size: 14px;
      }

      @media (max-width: 768px) and (orientation: landscape) {
        .team-name {
          font-size: 18px;
        }
        .score-value {
          font-size: 28px;
        }
        .score-label {
          font-size: 12px;
        }
        button {
          padding: 10px 15px;
          font-size: 14px;
        }
        .score-section {
          padding: 5px;
        }
      }

      @media (max-width: 480px) {
        .teams {
          flex-direction: column;
        }
        .score-value {
          font-size: 32px;
        }
      }

      @media (max-width: 480px) and (orientation: landscape) {
        .teams {
          flex-direction: row;
        }
        .team {
          min-height: 150px;
        }
        .score-value {
          font-size: 24px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="scoreboard">
        <div class="teams">
          <div class="team team-1">
            <div class="team-name" id="team1Name">Team 1</div>
            <div class="scores">
              <div class="score-section" onclick="handlePoint('team1')">
                <div class="score-label">Sets</div>
                <div class="score-value" id="team1Sets">0</div>
              </div>
              <div class="score-section" onclick="handlePoint('team1')">
                <div class="score-label">Games</div>
                <div class="score-value" id="team1Games">0</div>
              </div>
              <div class="score-section" onclick="handlePoint('team1')">
                <div class="score-label">Points</div>
                <div class="score-value" id="team1Points">0</div>
              </div>
            </div>
          </div>
          <div class="team team-2">
            <div class="team-name" id="team2Name">Team 2</div>
            <div class="scores">
              <div class="score-section" onclick="handlePoint('team2')">
                <div class="score-label">Sets</div>
                <div class="score-value" id="team2Sets">0</div>
              </div>
              <div class="score-section" onclick="handlePoint('team2')">
                <div class="score-label">Games</div>
                <div class="score-value" id="team2Games">0</div>
              </div>
              <div class="score-section" onclick="handlePoint('team2')">
                <div class="score-label">Points</div>
                <div class="score-value" id="team2Points">0</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="controls">
        <input type="text" id="team1NameInput" placeholder="Team 1 Name" />
        <input type="text" id="team2NameInput" placeholder="Team 2 Name" />

        <div class="control-row">
          <button class="plus" onclick="handlePoint('team1')">+ Team 1</button>
          <button class="minus" onclick="adjustPoints('team1', -1)">
            - Team 1
          </button>
        </div>
        <div class="control-row">
          <button class="plus" onclick="handlePoint('team2')">+ Team 2</button>
          <button class="minus" onclick="adjustPoints('team2', -1)">
            - Team 2
          </button>
        </div>
        <button class="reset" onclick="resetAll()">Reset All</button>
      </div>
    </div>

    <script>
      let isSuperTiebreak = false;
      let currentSet = 1;
      const pointSequence = [0, 15, 30, 40];

      function updateElement(id, value) {
        const element = document.getElementById(id);
        element.textContent = value;
        element.style.background = "rgba(255,255,255,0.2)";
        setTimeout(() => (element.style.background = ""), 200);
        localStorage.setItem("padelScoreboard", JSON.stringify(getState()));
      }

      function getState() {
        return {
          team1Name: document.getElementById("team1Name").textContent,
          team2Name: document.getElementById("team2Name").textContent,
          team1Sets: document.getElementById("team1Sets").textContent,
          team2Sets: document.getElementById("team2Sets").textContent,
          team1Games: document.getElementById("team1Games").textContent,
          team2Games: document.getElementById("team2Games").textContent,
          team1Points: document.getElementById("team1Points").textContent,
          team2Points: document.getElementById("team2Points").textContent,
        };
      }

      function handlePoint(team) {
        const pointsId = `${team}Points`;
        let currentPoints = parseInt(
          document.getElementById(pointsId).textContent
        );
        const opponent = team === "team1" ? "team2" : "team1";

        if (isSuperTiebreak) {
          currentPoints++;
          updateElement(pointsId, currentPoints);
          checkSuperTiebreak(team, opponent);
        } else {
          const currentIndex = pointSequence.indexOf(currentPoints);
          if (currentIndex === 3) {
            checkGameWin(team, opponent);
          } else {
            updateElement(pointsId, pointSequence[currentIndex + 1]);
          }
        }
      }

      function adjustPoints(team, change) {
        const pointsId = `${team}Points`;
        let currentPoints = parseInt(
          document.getElementById(pointsId).textContent
        );

        if (isSuperTiebreak) {
          currentPoints = Math.max(0, currentPoints + change);
          updateElement(pointsId, currentPoints);
        } else {
          const currentIndex = pointSequence.indexOf(currentPoints);
          const newIndex = Math.max(0, currentIndex + change);
          updateElement(pointsId, pointSequence[newIndex]);
        }
      }

      function checkGameWin(team, opponent) {
        updateElement(`${team}Points`, 0);
        const gamesId = `${team}Games`;
        const currentGames =
          parseInt(document.getElementById(gamesId).textContent) + 1;
        updateElement(gamesId, currentGames);

        const opponentGames = parseInt(
          document.getElementById(`${opponent}Games`).textContent
        );

        if (currentGames >= 6 && currentGames - opponentGames >= 2) {
          awardSet(team);
        } else if (currentGames === 6 && opponentGames === 6) {
          startSuperTiebreak();
        }
      }

      function awardSet(team) {
        const setsId = `${team}Sets`;
        updateElement(
          setsId,
          parseInt(document.getElementById(setsId).textContent) + 1
        );
        resetGames();
        currentSet++;
        if (currentSet > 3) endMatch();
      }

      function startSuperTiebreak() {
        isSuperTiebreak = true;
        updateElement("team1Points", 0);
        updateElement("team2Points", 0);
      }

      function checkSuperTiebreak(team, opponent) {
        const teamPoints = parseInt(
          document.getElementById(`${team}Points`).textContent
        );
        const opponentPoints = parseInt(
          document.getElementById(`${opponent}Points`).textContent
        );

        if (teamPoints >= 10 && teamPoints - opponentPoints >= 2) {
          awardSet(team);
          isSuperTiebreak = false;
        }
      }

      function resetGames() {
        updateElement("team1Games", 0);
        updateElement("team2Games", 0);
        updateElement("team1Points", 0);
        updateElement("team2Points", 0);
      }

      function resetAll() {
        if (confirm("Are you sure you want to reset all scores?")) {
          localStorage.removeItem("padelScoreboard");
          ["team1", "team2"].forEach((team) => {
            ["Sets", "Games", "Points"].forEach((type) => {
              updateElement(`${team}${type}`, 0);
            });
          });
          isSuperTiebreak = false;
          currentSet = 1;
          document.getElementById("team1Name").textContent = "Team 1";
          document.getElementById("team2Name").textContent = "Team 2";
          document.getElementById("team1NameInput").value = "";
          document.getElementById("team2NameInput").value = "";
        }
      }

      // Initialize
      document
        .getElementById("team1NameInput")
        .addEventListener("input", (e) => {
          document.getElementById("team1Name").textContent =
            e.target.value || "Team 1";
          localStorage.setItem("padelScoreboard", JSON.stringify(getState()));
        });
      document
        .getElementById("team2NameInput")
        .addEventListener("input", (e) => {
          document.getElementById("team2Name").textContent =
            e.target.value || "Team 2";
          localStorage.setItem("padelScoreboard", JSON.stringify(getState()));
        });

      // Load saved state
      const savedState = localStorage.getItem("padelScoreboard");
      if (savedState) {
        const state = JSON.parse(savedState);
        Object.entries(state).forEach(([key, value]) => {
          document.getElementById(key).textContent = value;
        });
      }
    </script>
  </body>
</html>
