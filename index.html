<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Padel Scoreboard</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f0f0f0;
      }
      .container {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
      }
      .scoreboard {
        background-color: #222;
        color: white;
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 20px;
      }
      .match-info {
        text-align: center;
        margin-bottom: 20px;
      }
      .match-info h1 {
        margin: 0;
        font-size: 24px;
      }
      .teams {
        display: flex;
        justify-content: space-between;
        font-size: 24px;
      }
      .team {
        flex: 1;
        text-align: center;
      }
      .team-name {
        font-size: 28px;
        margin-bottom: 10px;
        font-weight: bold;
      }
      .scores {
        display: flex;
        justify-content: space-between;
        margin-top: 20px;
      }
      .score-section {
        flex: 1;
      }
      .score-label {
        text-align: center;
        font-size: 16px;
        margin-bottom: 5px;
      }
      .score-value {
        background-color: #000;
        color: #ff0;
        font-size: 48px;
        text-align: center;
        padding: 10px;
        border-radius: 5px;
        margin: 0 5px;
      }
      .controls {
        background-color: white;
        border-radius: 10px;
        padding: 20px;
      }
      .control-row {
        display: flex;
        margin-bottom: 15px;
      }
      .control-section {
        flex: 1;
        padding: 0 10px;
      }
      .control-label {
        font-weight: bold;
        margin-bottom: 5px;
      }
      button {
        background-color: #4caf50;
        color: white;
        border: none;
        padding: 10px 15px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 2px;
        cursor: pointer;
        border-radius: 5px;
      }
      button.reset {
        background-color: #f44336;
      }
      button.minus {
        background-color: #f44336;
      }
      button.plus {
        background-color: #4caf50;
      }
      input[type="text"] {
        padding: 10px;
        width: 100%;
        box-sizing: border-box;
        margin-bottom: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
      }
      .display-toggle {
        text-align: center;
        margin-top: 20px;
      }
      .display-mode {
        background-color: #2196f3;
      }
      .admin-panel {
        display: block;
      }
      #qrcode {
        text-align: center;
        margin-top: 20px;
      }
      @media (max-width: 600px) {
        .teams,
        .scores {
          flex-direction: column;
        }
        .team,
        .score-section {
          margin-bottom: 20px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="scoreboard">
        <div class="match-info">
          <h1 id="matchTitle">Padel Tournament</h1>
        </div>
        <div class="teams">
          <div class="team">
            <div class="team-name" id="team1Name">Team 1</div>
          </div>
          <div class="team">
            <div class="team-name" id="team2Name">Team 2</div>
          </div>
        </div>
        <div class="scores">
          <div class="score-section">
            <div class="score-label">Games</div>
            <div class="score-value" id="team1Games">0</div>
          </div>
          <div class="score-section">
            <div class="score-label">Current Set</div>
            <div class="score-value" id="team1Set">0</div>
          </div>
          <div class="score-section">
            <div class="score-label">Points</div>
            <div class="score-value" id="team1Points">0</div>
          </div>
        </div>
        <div class="scores">
          <div class="score-section">
            <div class="score-value" id="team2Games">0</div>
          </div>
          <div class="score-section">
            <div class="score-value" id="team2Set">0</div>
          </div>
          <div class="score-section">
            <div class="score-value" id="team2Points">0</div>
          </div>
        </div>
      </div>

      <div class="controls admin-panel" id="adminPanel">
        <div class="control-row">
          <div class="control-section">
            <div class="control-label">Match Title</div>
            <input
              type="text"
              id="matchTitleInput"
              placeholder="Padel Tournament"
            />
          </div>
        </div>

        <div class="control-row">
          <div class="control-section">
            <div class="control-label">Team 1 Name</div>
            <input type="text" id="team1NameInput" placeholder="Team 1" />
          </div>
          <div class="control-section">
            <div class="control-label">Team 2 Name</div>
            <input type="text" id="team2NameInput" placeholder="Team 2" />
          </div>
        </div>

        <div class="control-row">
          <div class="control-section">
            <div class="control-label">Team 1 Points</div>
            <button class="minus" onclick="updateScore('team1Points', -1)">
              -
            </button>
            <button class="plus" onclick="updateScore('team1Points', 1)">
              +
            </button>
          </div>
          <div class="control-section">
            <div class="control-label">Team 2 Points</div>
            <button class="minus" onclick="updateScore('team2Points', -1)">
              -
            </button>
            <button class="plus" onclick="updateScore('team2Points', 1)">
              +
            </button>
          </div>
        </div>

        <div class="control-row">
          <div class="control-section">
            <div class="control-label">Team 1 Set</div>
            <button class="minus" onclick="updateScore('team1Set', -1)">
              -
            </button>
            <button class="plus" onclick="updateScore('team1Set', 1)">+</button>
          </div>
          <div class="control-section">
            <div class="control-label">Team 2 Set</div>
            <button class="minus" onclick="updateScore('team2Set', -1)">
              -
            </button>
            <button class="plus" onclick="updateScore('team2Set', 1)">+</button>
          </div>
        </div>

        <div class="control-row">
          <div class="control-section">
            <div class="control-label">Team 1 Games</div>
            <button class="minus" onclick="updateScore('team1Games', -1)">
              -
            </button>
            <button class="plus" onclick="updateScore('team1Games', 1)">
              +
            </button>
          </div>
          <div class="control-section">
            <div class="control-label">Team 2 Games</div>
            <button class="minus" onclick="updateScore('team2Games', -1)">
              -
            </button>
            <button class="plus" onclick="updateScore('team2Games', 1)">
              +
            </button>
          </div>
        </div>

        <button class="reset" onclick="resetScores()">Reset Scores</button>
        <button class="reset" onclick="resetAll()">Reset All</button>
        <button class="display-mode" onclick="toggleDisplayMode()">
          Toggle Display Mode
        </button>

        <div id="qrcode">
          <p>Use this URL to control the scoreboard from another device:</p>
          <code id="pageUrl"></code>
        </div>
      </div>
    </div>

    <script>
      // Initialize variables
      let isDisplayMode = false;

      // Display the current URL
      document.getElementById("pageUrl").textContent = window.location.href;

      // Load saved data from local storage if available
      function loadSavedData() {
        const savedData = localStorage.getItem("padelScoreboard");
        if (savedData) {
          const data = JSON.parse(savedData);
          document.getElementById("matchTitle").textContent =
            data.matchTitle || "Padel Tournament";
          document.getElementById("team1Name").textContent =
            data.team1Name || "Team 1";
          document.getElementById("team2Name").textContent =
            data.team2Name || "Team 2";
          document.getElementById("team1Points").textContent =
            data.team1Points || "0";
          document.getElementById("team2Points").textContent =
            data.team2Points || "0";
          document.getElementById("team1Set").textContent =
            data.team1Set || "0";
          document.getElementById("team2Set").textContent =
            data.team2Set || "0";
          document.getElementById("team1Games").textContent =
            data.team1Games || "0";
          document.getElementById("team2Games").textContent =
            data.team2Games || "0";

          // Update input fields
          document.getElementById("matchTitleInput").value =
            data.matchTitle || "";
          document.getElementById("team1NameInput").value =
            data.team1Name || "";
          document.getElementById("team2NameInput").value =
            data.team2Name || "";
        }
      }

      // Save data to local storage
      function saveData() {
        const data = {
          matchTitle: document.getElementById("matchTitle").textContent,
          team1Name: document.getElementById("team1Name").textContent,
          team2Name: document.getElementById("team2Name").textContent,
          team1Points: document.getElementById("team1Points").textContent,
          team2Points: document.getElementById("team2Points").textContent,
          team1Set: document.getElementById("team1Set").textContent,
          team2Set: document.getElementById("team2Set").textContent,
          team1Games: document.getElementById("team1Games").textContent,
          team2Games: document.getElementById("team2Games").textContent,
        };
        localStorage.setItem("padelScoreboard", JSON.stringify(data));
      }

      // Update score values
      function updateScore(id, change) {
        const element = document.getElementById(id);
        let value = parseInt(element.textContent);

        if (id.includes("Points")) {
          // For padel/tennis points: 0, 15, 30, 40, Game
          if (change > 0) {
            if (value === 0) value = 15;
            else if (value === 15) value = 30;
            else if (value === 30) value = 40;
            else if (value === 40) {
              value = 0;
              // Automatically increment set score
              const setId = id.replace("Points", "Set");
              updateScore(setId, 1);
            }
          } else {
            if (value === 40) value = 30;
            else if (value === 30) value = 15;
            else if (value === 15) value = 0;
          }
        } else {
          // For games and sets, just increment/decrement
          value += change;
          if (value < 0) value = 0;

          // Check if set is complete
          if (id.includes("Set") && value >= 6) {
            // Reset set score and increment games
            value = 0;
            const gamesId = id.replace("Set", "Games");
            updateScore(gamesId, 1);
          }
        }

        element.textContent = value;
        saveData();
      }

      // Update text fields
      function updateTextField(inputId, displayId) {
        const input = document.getElementById(inputId);
        const display = document.getElementById(displayId);

        input.addEventListener("input", function () {
          display.textContent = this.value || this.placeholder;
          saveData();
        });

        // Initialize with current values
        if (input.value) {
          display.textContent = input.value;
        }
      }

      // Reset all scores to zero
      function resetScores() {
        document.getElementById("team1Points").textContent = "0";
        document.getElementById("team2Points").textContent = "0";
        document.getElementById("team1Set").textContent = "0";
        document.getElementById("team2Set").textContent = "0";
        document.getElementById("team1Games").textContent = "0";
        document.getElementById("team2Games").textContent = "0";
        saveData();
      }

      // Reset everything
      function resetAll() {
        resetScores();
        document.getElementById("matchTitle").textContent = "Padel Tournament";
        document.getElementById("team1Name").textContent = "Team 1";
        document.getElementById("team2Name").textContent = "Team 2";
        document.getElementById("matchTitleInput").value = "";
        document.getElementById("team1NameInput").value = "";
        document.getElementById("team2NameInput").value = "";
        saveData();
      }

      // Toggle between display mode and admin mode
      function toggleDisplayMode() {
        const adminPanel = document.getElementById("adminPanel");
        isDisplayMode = !isDisplayMode;

        if (isDisplayMode) {
          adminPanel.style.display = "none";
          document.querySelector(".scoreboard").style.height = "100vh";
          document.querySelector(".scoreboard").style.margin = "0";
          document.querySelector(".container").style.maxWidth = "100%";
          document.querySelector(".container").style.padding = "0";
          document.querySelector(".team-name").style.fontSize = "48px";
          document.querySelector(".score-value").style.fontSize = "72px";
        } else {
          adminPanel.style.display = "block";
          document.querySelector(".scoreboard").style.height = "auto";
          document.querySelector(".scoreboard").style.marginBottom = "20px";
          document.querySelector(".container").style.maxWidth = "800px";
          document.querySelector(".container").style.padding = "20px";
          document.querySelector(".team-name").style.fontSize = "28px";
          document.querySelector(".score-value").style.fontSize = "48px";
        }
      }

      // Initialize everything when the page loads
      window.onload = function () {
        loadSavedData();
        updateTextField("matchTitleInput", "matchTitle");
        updateTextField("team1NameInput", "team1Name");
        updateTextField("team2NameInput", "team2Name");
      };
    </script>
  </body>
</html>
